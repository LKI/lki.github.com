<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Hugo 0.74.3" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="Lirian Su" />
  <meta property="og:url" content="https://liriansu.com/posts/2015-05-15-vagrant-up-but-mount-no-device-zh/" />
  <link rel="canonical" href="https://liriansu.com/posts/2015-05-15-vagrant-up-but-mount-no-device-zh/" /><script type="application/ld+json">
  {
      "@context" : "https://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
           "@type": "WebPage",
           "@id": "https:\/\/liriansu.com\/"
      },
      "articleSection" : "posts",
      "name" : "Vagrant-up遇到mount no device的解决方案",
      "headline" : "Vagrant-up遇到mount no device的解决方案",
      "description" : "\u003cp\u003e今天跑\u003ccode\u003evagrant up\u003c\/code\u003e的时候遇到了这个问题：\u003c\/p\u003e",
      "inLanguage" : "en-US",
      "author" : "Lirian Su",
      "creator" : "Lirian Su",
      "publisher": "Lirian Su",
      "accountablePerson" : "Lirian Su",
      "copyrightHolder" : "Lirian Su",
      "copyrightYear" : "2015",
      "datePublished": "2015-05-15 10:29:05 \u002b0000 UTC",
      "dateModified" : "2015-05-15 10:29:05 \u002b0000 UTC",
      "url" : "https:\/\/liriansu.com\/posts\/2015-05-15-vagrant-up-but-mount-no-device-zh\/",
      "keywords" : [  ]
  }
</script>
<title>Vagrant-up遇到mount no device的解决方案 - 浮云计算</title>
  <meta property="og:title" content="Vagrant-up遇到mount no device的解决方案 - 浮云计算" />
  <meta property="og:type" content="article" />
  <meta name="description" content="今天跑vagrant up的时候遇到了这个问题：" />

  <link rel="stylesheet" href="/css/flexboxgrid-6.3.1.min.css" />
  <link rel="stylesheet"
    href="/css/github-markdown.min.css" />
  <link rel="stylesheet" href="/css/highlight/tomorrow.min.css" />
  <link rel="stylesheet" href="/css/index.css">
  <link href="/index.xml" rel="alternate" type="application/rss+xml" title="浮云计算">
  
  <link href="https://fonts.googleapis.com/css?family=Arvo|Permanent+Marker" rel="stylesheet">
  
  

  
</head>


<body>
  <article class="post 中文" id="article">
    <div class="row">
      <div class="col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2 col-lg-6 col-lg-offset-3">
        <div class="site-header">
          <header>
  <div class="signatures site-title">
    <a href="/">Lirian Su</a>
  </div>
</header>
<div class="row end-xs site-header-right">
  
  <div class="site-header-item">
    <a href="/about" target="_blank">about</a>
  </div>
  
  <div class="site-header-item">
    <a href="https://github.com/LKI" target="_blank">github</a>
  </div>
  
  <div class="site-header-item">
    <a href="https://www.zhihu.com/people/liriansu" target="_blank">zhihu</a>
  </div>
  
  <div class="site-header-item">
    <a href="/index.xml" target="_blank">rss</a>
  </div>
  
</div>
<div class="header-line"></div>

        </div>
        <header class="post-header">
          <h1 class="post-title">Vagrant-up遇到mount no device的解决方案</h1>
          
          <div class="row post-desc">
            
            <time class="post-header-item" datetime="2015-05-15 10:29:05 UTC">
              Written at 2015-05-15 10:29
            </time>
            
            <span class="post-header-item" id="busuanzi_container_page_pv"> Views <span id="busuanzi_value_page_pv" /> </span>
          </div>
          
        </header>

        <div class="post-content markdown-body">
          <p>今天跑<code>vagrant up</code>的时候遇到了这个问题：</p>
<pre><code>==&gt; cvc-tools: Machine booted and ready!
==&gt; cvc-tools: Checking for guest additions in VM...
==&gt; cvc-tools: Configuring and enabling network interfaces...
==&gt; cvc-tools: Mounting shared folders...
    cvc-tools: /work =&gt; D:/work/
Failed to mount folders in Linux guest. This is usually because
the &quot;vboxsf&quot; file system is not available. Please verify that
the guest additions are properly installed in the guest and
can work properly. The command attempted was:

mount -t vboxsf -o uid=`id -u devel`,gid=`getent group devel | cut -d:
-f3` work /work
mount -t vboxsf -o uid=`id -u devel`,gid=`id -g devel` work /work

The error output from the last command was:

/sbin/mount.vboxsf: mounting failed with the error: No such device
</code></pre><p>查看了 <a href="https://github.com/mitchellh/vagrant/issues/1657">https://github.com/mitchellh/vagrant/issues/1657</a>
以后，明白这是<code>yum update</code>更新了内核，但是没有更新VirtualBox的连接的问题。</p>
<p>于是重新添加一下VBox：</p>
<pre><code>[lirian@localhost ~]$ sudo /etc/init.d/vboxadd setup
Removing existing VirtualBox non-DKMS kernel modules       [  OK  ]
Building the VirtualBox Guest Additions kernel modules
The headers for the current running kernel were not found. If the
following
module compilation fails then this could be the reason.
The missing package can be probably installed with
yum install kernel-devel-2.6.18-404.el5

Building the main Guest Additions module                   [FAILED]
(Look at /var/log/vboxadd-install.log to find out what went wrong)
Doing non-kernel setup of the Guest Additions              [  OK  ]
</code></pre><p>根据以上信息，得知现在在跑的内核开发包缺失，于是再跑一下：</p>
<p><code>yum install kernel-devel-2.6.18-404.el5</code></p>
<p>之后再vagrant up或者手动mount就可以解决问题了。</p>
<p>总结：vagrant up遇到mount error: no such device可以通过以下脚本解决：</p>
<pre><code>yum install kernel-devel-2.6.18-404.el5
/etc/init.d/vboxadd setup
mount -t vboxsf -o uid=`id -u devel`,gid=`id -g devel` work /work
</code></pre>
        </div>

        
          

          
          <div style="height: 20px;"></div>
        

        



<div class="post-comments">
  <script src="https://utteranc.es/client.js"
          repo="LKI/lki.github.io"
          issue-term="title"
          label="comment"
          theme="github-light"
          crossorigin="anonymous"
          async>
  </script>
</div>


        

<div class="site-footer">
  <div class="site-footer-left">
    <div class="site-footer-item">
      <span id="busuanzi_container_site_pv" style="display:none"> PV: <span id="busuanzi_value_site_pv"/> </span>
    </div>
    <div class="site-footer-item">
      <span id="busuanzi_container_site_uv" style="display:none"> UV: <span id="busuanzi_value_site_uv"/> </span>
    </div>
  </div>

  <div class="site-footer-right">
    
    
    <div class="site-footer-item">
      <a href="/en/">English</a>
    </div>
    
    
  </div>
</div>

      </div>
    </div>
  </article>

  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

</body>

</html>
